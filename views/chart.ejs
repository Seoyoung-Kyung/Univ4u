<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
<script type = "text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
<script type = "text/javascript" src = "https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script type="text/javascript"></script>
<div style="width: 500px;">
<canvas id="myChart"></canvas>
</div>
<input type='hidden' id=results value="<%=rows%>"/>
<script>
  // === include 'setup' then 'config' above ===

  jsonText = JSON.parse(document.getElementById("results").value);
  let svyyr = [];
  let acq_rate = [];
  let schlId = [];
  let schlKrnNm = [];

  let avgTuit = [];
  let studOrate = [];
  let studFjobrat = [];
  let studFrate = [];
  let fTimeAqRate_currentStud = [];
  let fTimelecRatio = [];

$(document).ready(function() {
  var name = 'comp';
  $('[name]')
  each(function() {
    comp.push($(this).attr('data-name'));
    console.log(comp)
  });
});

  jsonText.forEach((item,idx)=>{
      svyyr.push(parseInt(item.svyyr));
      schlId.push(parseInt(item.schlId));
      schlKrnNm.push(item.schlKrnNm);

      avgTuit.push(parseFloat(item.avgTuit));
      studOrate.push(parseFloat(item.studOrate));
      studFjobrat.push(parseFloat(item.studFjobrat));
      studFrate.push(parseFloat(item.studFrate));
      fTimeAqRate_currentStud.push(parseFloat(item.fTimeAqRate_currentStud));
      fTimelecRatio.push(parseFloat(item.fTimelecRatio));
      acq_rate.push(parseFloat(item.acq_rate));
  });

  const labels = studFjobrat;
  const data = {
    labels: schlKrnNm,
    datasets: [{
      label: '졸업생 취업률',
      data: studFjobrat,
      backgroundColor: [
        'rgba(255, 99, 132, 0.2)',
        'rgba(255, 159, 64, 0.2)',
        'rgba(255, 205, 86, 0.2)',
        'rgba(75, 192, 192, 0.2)',
        'rgba(54, 162, 235, 0.2)',
        'rgba(153, 102, 255, 0.2)',
        'rgba(201, 203, 207, 0.2)'
      ],
      borderColor: [
        'rgb(255, 99, 132)',
        'rgb(255, 159, 64)',
        'rgb(255, 205, 86)',
        'rgb(75, 192, 192)',
        'rgb(54, 162, 235)',
        'rgb(153, 102, 255)',
        'rgb(201, 203, 207)'
      ],
      borderWidth: 1
    }]
  };

  const config = {
    type: 'bar',
    data: data,
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    },
  };

  var myChart = new Chart(
    document.getElementById('myChart'),
    config
  );

</script>
